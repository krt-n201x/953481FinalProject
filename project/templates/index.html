{% extends "base.html" %}

{% block content %}
{% if not current_user.is_authenticated %}
<h1 class="title">
  Food suggestion
</h1>
<h2 class="subtitle">
  Please login to use our website
</h2>
{% endif %}
{% if current_user.is_authenticated %}

<h1 class="title">
  FIND YOUR DISH
</h1>
<h2 class="subtitle">
  Select search mode
</h2>

<div class="columns is-multiline is-desktop">
  <div class="column is-3 is-offset-3">
    <div class="container is-max-desktop mb-5 is-align-self-center">
      <form action="/searcall" method="POST">
        <div class="control">
          <input name="searcbyname" value=true hidden>
          <input name="getin" value=true hidden>
          <button class="button is-success is-light is-fullwidth is-rounded">Find Food name</button>
        </div>
      </form>
    </div>
  </div>
  <div class="column is-3 ">
    <div class="container is-max-desktop mb-5 is-align-self-center">
      <form action="/searcall" method="POST">
        <div class="control">
          <input name="searcbyingredient" value=true hidden>
          <input name="getin" value=true hidden>
          <button class="button is-success is-light is-fullwidth is-rounded">Find Food ingredient</button>
        </div>
      </form>
    </div>
  </div>
</div>


<h1 class="title">
  Food suggestion Today!!
</h1>
<h2 class="subtitle">
  Please enjoy
</h2>

{% with messages = get_flashed_messages() %}
{% if messages[0]==1 %}
<div class="notification is-success">
  The menu have been added to your favoraite list.
</div>
{% endif %}
{% if messages[0]==0 %}
<div class="notification is-danger">
  The menu already exists in your favorite list.
</div>
{% endif %}
{% endwith %}


<div class="columns is-multiline mb-5">
  {% for item in data %}
  <div class="column is-one-quarter is-mobile">
    <div class="card">
      <header class="card-header" style="height:60px">
        <p class="card-header-title">
          {{item.Title}}
        </p>
      </header>
      <div class="card-content">
        <div class="content">
          <img src="../static/FoodImages/{{item.Image_Name}}.jpg">
        </div>
      </div>
      <div class="columns is-desktop">
        <div class="column">
          <form action="/readindetails" method="POST">
            <input name="foodTitle" value="{{item.Title}}" hidden>
            <button class="button is-link is-inverted ">Read</button>
          </form>
        </div>
        <div class="column">
          <form action="/add-favorite" method="POST">
            <div class="control">
              <input name="foodTitle" value="{{item.Title}}" hidden>
              <input name="userID" value="{{userid}}" hidden>
              <input name="foodPicture" value="{{item.Image_Name}}" hidden>
              <button class="button is-inverted">
                <span class="icon has-text-danger">
                  <i class="fa fa-light fa-heart"></i>
                </span>
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

<h1 class="title">
  Food suggestion For you
</h1>

{% if data2 == "" %}
<h2 class="subtitle">
  It's look like you don't have any favorite now.
  Add some menu to get our suggestion.
</h2>
{% endif %}

<div class="columns is-multiline mb-5">

  {% if data2 != "" %}
  {% for item in data2 %}
        <div class="column is-one-quarter is-mobile">
          <div class="card">
            <header class="card-header" style="height:60px">
              <p class="card-header-title">
                {{item.foodTitle}}
              </p>
            </header>
            <div class="card-content">
              <div class="content">
                <img src="../static/FoodImages/{{item.foodPicture}}.jpg">
              </div>
            </div>
            <div class="columns is-desktop">
              <div class="column">
                <form action="/readindetails" method="POST">
                  <input name="foodTitle" value="{{item.foodTitle}}" hidden>
                  <button class="button is-link is-inverted ">Read</button>
                </form>
              </div>
              <div class="column">
                <form action="/add-favorite" method="POST">
                  <div class="control">
                    <input name="foodTitle" value="{{item.foodTitle}}" hidden>
                    <input name="userID" value="{{userid}}" hidden>
                    <input name="foodPicture" value="{{item.foodPicture}}" hidden>
                    <button class="button is-inverted">
                      <span class="icon has-text-danger">
                        <i class="fa fa-light fa-heart"></i>
                      </span>
                    </button>
                  </div>
                </form>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}

  {% endif %}
</div>
{% endif %}
{% endblock %}